apisix:
  etcd:
    replicaCount: 1
  image:
    debug: true
  dataPlane:
    ingress:
      enabled: true
      hostname: mp-data-service.127.0.0.1.nip.io
      extraHosts:
        - name: mp-tmf-api.127.0.0.1.nip.io
          path: /
        - name: tpp-data-service.127.0.0.1.nip.io
          path: /
        - name: tpp-service.127.0.0.1.nip.io
          path: /
        - name: contract-management.127.0.0.1.nip.io
          path: /
  catchAllRoute:
    enabled: false
  routes: "- uri: /.well-known/openid-configuration\n  host: mp-data-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      verifier:3000: 1\n    type: roundrobin\n  plugins:\n    proxy-rewrite:\n      uri: /services/data-service/.well-known/openid-configuration\n- uri: /.well-known/openid-configuration\n  host: contract-management.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      verifier:3000: 1\n    type: roundrobin\n  plugins:\n    proxy-rewrite:\n      uri: /services/contract-management/.well-known/openid-configuration\n- uri: /.well-known/openid-configuration\n  host: tpp-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      verifier:3000: 1\n    type: roundrobin\n  plugins:\n    proxy-rewrite:\n      uri: /services/tpp-service/.well-known/openid-configuration\n- uri: /.well-known/data-space-configuration\n  upstream:\n    nodes:\n      dsconfig:3002: 1\n    type: roundrobin\n  plugins:\n    proxy-rewrite:\n      uri: /.well-known/data-space-configuration/data-space-configuration.json\n    response-rewrite:\n      headers:\n        set:\n          content-type: application/json\n- uri: /*\n  host: tpp-data-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      data-service-scorpio:9090: 1\n    type: roundrobin\n  plugins:\n    openid-connect:\n      proxy_opts:\n        https_proxy: http://squid-proxy.infra.svc.cluster.local:8888\n      bearer_only: true\n      use_jwks: true\n      client_id: contract-management\n      client_secret: unused\n      ssl_verify: false\n      discovery: https://verifier.mp-operations.org/services/tmf-api/.well-known/openid-configuration\n    opa:\n      host: \"http://localhost:8181\"\n      policy: tpp\n- uri: /*\n  host: mp-data-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      data-service-scorpio:9090: 1\n    type: roundrobin\n  plugins: \n    openid-connect:\n      proxy_opts:\n        https_proxy: http://squid-proxy.infra.svc.cluster.local:8888\n      bearer_only: true\n      use_jwks: true\n      client_id: data-service\n      client_secret: unused\n      ssl_verify: false\n      discovery: https://verifier.mp-operations.org/services/data-service/.well-known/openid-configuration\n    opa:\n      host: \"http://localhost:8181\"\n      policy: policy/main\n      with_body: true\n- uri: /.well-known/openid-configuration\n  host: mp-tmf-api.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      verifier:3000: 1\n    type: roundrobin\n  plugins:\n    proxy-rewrite:\n      uri: /services/tmf-api/.well-known/openid-configuration\n- uri: /api/v1/catalogs\n  host: tpp-catalog-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      rainbow:8080: 1\n- uri: /*\n  host: tpp-service.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      rainbow:8080: 1\n  plugins:\n    openid-connect:\n      proxy_opts:\n        https_proxy: http://squid-proxy.infra.svc.cluster.local:8888\n      bearer_only: true\n      use_jwks: true\n      client_id: data-service\n      client_secret: unused\n      ssl_verify: false\n      discovery: https://verifier.mp-operations.org/services/data-service/.well-known/openid-configuration\n    opa:\n      host: \"http://localhost:8181\"\n      policy: policy/main\n      with_body: true\n- uri: /*\n  host: mp-tmf-api.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      tm-forum-api:8080: 1\n    type: roundrobin\n  plugins:\n    openid-connect:\n      proxy_opts:\n        https_proxy: http://squid-proxy.infra.svc.cluster.local:8888\n      bearer_only: true\n      use_jwks: true\n      client_id: contract-management\n      client_secret: unused\n      ssl_verify: false\n      discovery: https://verifier.mp-operations.org/services/tmf-api/.well-known/openid-configuration\n    opa:\n      host: \"http://localhost:8181\"\n      policy: policy/main\n      with_body: true\n- uri: /*\n  host: contract-management.127.0.0.1.nip.io\n  upstream:\n    nodes:\n      contract-management:8080: 1\n    type: roundrobin\n  plugins:\n    openid-connect:\n      proxy_opts:\n        https_proxy: http://squid-proxy.infra.svc.cluster.local:8888\n      bearer_only: true\n      use_jwks: true\n      client_id: contract-management\n      client_secret: unused\n      ssl_verify: false\n      discovery: https://verifier.mp-operations.org/services/contract-management/.well-known/openid-configuration\n    opa:\n      host: \"http://localhost:8181\"\n      policy: policy/main\n      with_body: true"
credentials-config-service:
  ingress:
    enabled: true
    hosts:
      - host: provider-ccs.127.0.0.1.nip.io
        paths:
          - "/"
  additionalEnvVars:
    - name: FLYWAY_DATASOURCES_DEFAULT_LOCATIONS
      value: classpath:db/migration/common,classpath:db/migration/mysql
  registration:
    enabled: true
    services:
      - id: bae
        defaultOidcScope: "openid learcredential"
        authorizationType: "FRONTEND_V2"
        oidcScopes:
          "openid learcredential":
            credentials:
              - type: LegalPersonCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - http://trusted-issuers-list:8080
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
            dcql:
              credentials:
                - id: legal-person-query
                  format: "vc+sd-jwt"
                  multiple: false
                  claims:
                    - id: name-claim
                      path:
                        - firstName
                    - id: roles-claim
                      path:
                        - roles
                  meta:
                    vct_values:
                      - LegalPersonCredential
      - id: data-service
        defaultOidcScope: "default"
        authorizationType: "DEEPLINK"
        oidcScopes:
          "default":
            credentials:
              - type: UserCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - http://trusted-issuers-list:8080
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
            dcql:
              credentials:
                - id: user-query
                  format: "jwt_vc_json"
                  multiple: true
                  meta:
                    type_values:
                      - UserCredential
          "legal":
            credentials:
              - type: LegalPersonCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - http://trusted-issuers-list:8080
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
            dcql:
              credentials:
                - id: legal-person-query
                  format: "vc+sd-jwt"
                  multiple: false
                  claims:
                    - id: name-claim
                      path:
                        - firstName
                    - id: roles-claim
                      path:
                        - roles
                  meta:
                    vct_values:
                      - LegalPersonCredential
          "operator":
            credentials:
              - type: OperatorCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - http://trusted-issuers-list:8080
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
            dcql:
              credentials:
                - id: operator-query
                  format: "jwt_vc_json"
                  multiple: true
                  meta:
                    type_values:
                      - OperatorCredential
      - id: tpp-service
        defaultOidcScope: "operator"
        authorizationType: "DEEPLINK"
        oidcScopes:
          "operator":
            credentials:
              - type: OperatorCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - http://trusted-issuers-list:8080
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
      - id: contract-management
        defaultOidcScope: "external-marketplace"
        authorizationType: "DEEPLINK"
        oidcScopes:
          "external-marketplace":
            credentials:
              - type: MarketplaceCredential
                trustedParticipantsLists:
                  - http://tir.127.0.0.1.nip.io
                trustedIssuersLists:
                  - "*"
                jwtInclusion:
                  enabled: true
                  fullInclusion: true
            dcql:
              credentials:
                - id: mc-query
                  format: "jwt_vc_json"
                  multiple: true
                  meta:
                    type_values:
                      - MarketplaceCredential
vcverifier:
  ingress:
    enabled: true
    annotations:
      traefik.ingress.kubernetes.io/router.tls: "true"
    tls:
      - hosts:
          - verifier.mp-operations.org
        secretName: tls-secret
    hosts:
      - host: verifier.mp-operations.org
        paths:
          - "/"
  deployment:
    logging:
      level: DEBUG
    verifier:
      tirAddress: http://tir.127.0.0.1.nip.io/
      did: did:web:mp-operations.org
      supportedModes: ["byValue", "byReference"]
      clientIdentification:
        keyPath: /signing-key/client.key.pem
        requestKeyAlgorithm: ES256
        id: x509_san_dns:verifier.mp-operations.org
        certificatePath: /certificate/client-chain-bundle.cert.pem
    server:
      host: https://verifier.mp-operations.org
    configRepo:
      configEndpoint: http://credentials-config-service:8080
    additionalVolumes:
      - name: signing-key
        secret:
          secretName: signing-key
      - name: cert-chain
        secret:
          secretName: cert-chain
      # add the self generated root ca to the system truststore
      - name: root-ca
        emptyDir: {}
      - name: ca-to-add
        secret:
          secretName: root-ca
    additionalVolumeMounts:
      - name: signing-key
        mountPath: /signing-key
      - name: cert-chain
        mountPath: /certificate
      # add the self generated root ca to the system truststore
      - name: root-ca
        mountPath: /etc/ssl/cert.pem
        subPath: cert.pem
    additionalEnvVars:
      - name: HTTPS_PROXY
        value: "http://squid-proxy.infra.svc.cluster.local:8888"
      - name: HTTP_PROXY
        value: "http://squid-proxy.infra.svc.cluster.local:8888"
      - name: NO_PROXY
        value: "credentials-config-service,w3.org,trusted-issuers-list"
    initContainers:
      # add the self generated root ca to the system truststore
      - name: add-root-ca
        image: alpine:3.21.3
        command:
          - /bin/sh
        args:
          - -c
          - |
            #!/bin/sh
            cp /etc/ssl/cert.pem /root-ca/cert.pdata.typeem
            cat /root-ca/cacert.pem >> /root-ca/cert.pem
        volumeMounts:
          - name: root-ca
            mountPath: /root-ca
          - name: ca-to-add
            mountPath: /root-ca/cacert.pem
            subPath: cacert.pem
      - name: register-at-tir
        image: ubuntu
        command:
          - /bin/bash
        args:
          - -ec
          - |
            #!/bin/bash
            apt-get -y update; apt-get -y install curl
            curl -X 'POST' 'http://tir.trust-anchor.svc.cluster.local:8080/issuer' -H 'Content-Type: application/json' -d "{\"did\": \"did:web:mp-operations.org\", \"credentials\": []}"
mysql:
  resourcesPreset: none
  primary:
    persistence:
      enabled: false
  secondary:
    persistence:
      enabled: false
postgis:
  primary:
    resourcesPreset: none
    persistence:
      enabled: false
  readReplicas:
    persistence:
      enabled: false
postgresql:
  primary:
    resourcesPreset: none
    persistence:
      enabled: false
  readReplicas:
    persistence:
      enabled: false
did:
  enabled: true
  config:
    server:
      serverPort: "3000"
      didType: "web"
      hostUrl: "http://mp-operations.org"
      outputFormat: "json_jwk"
      keystorePasswordSecretName: "provider-keystore"
      keystorePasswordSecretKey: "password"
    generateKey:
      enabled: false
    provideKeystore:
      enabled: true
      keystoreSecretName: "provider-keystore"
      keystoreSecretKey: "keystore.pfx"
      keyType: "EC"
  ingress:
    enabled: true
    className: ""
    annotations:
      traefik.ingress.kubernetes.io/service.passhostheader: "true"
      traefik.ingress.kubernetes.io/router.tls: "true"
    hosts:
      - host: mp-operations.org
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: tls-secret
        hosts:
          - mp-operations.org
dataSpaceConfig:
  enabled: true
  serviceType: ClusterIP
  port: 3002
  supportedModels:
    - "https://raw.githubusercontent.com/smart-data-models/dataModel.Consumption/master/ConsumptionPoint/schema.json"
    - "https://raw.githubusercontent.com/smart-data-models/dataModel.Consumption/master/ConsumptionCost/schema.json"
  supportedProtocols:
    - http
    - https
  authenticationProtocols:
    - oid4vp
scorpio:
  ingress:
    enabled: true
    # only to make it available for the test initialization
    hosts:
      - host: scorpio-provider.127.0.0.1.nip.io
        paths:
          - "/"
odrl-pap:
  additionalEnvVars:
    - name: GENERAL_ORGANIZATION_DID
      value: did:web:mp-operations.org
  ingress:
    enabled: true
    hosts:
      - host: pap-provider.127.0.0.1.nip.io
        paths:
          - "/"
tm-forum-api:
  registration:
    enabled: false
  ingress:
    enabled: true
    hosts:
      - host: tm-forum-api.127.0.0.1.nip.io
        paths:
          - /
  defaultConfig:
    livenessProbe:
      healthPath: /health/liveness
      initialDelaySeconds: 30
      periodSeconds: 1000
      successThreshold: 1
      failureThreshold: 3000
      timeoutSeconds: 10000
    readinessProbe:
      readinessPath: /health/readiness
      initialDelaySeconds: 30
      periodSeconds: 1000
      successThreshold: 1
      failureThreshold: 3000
      timeoutSeconds: 10000
# -- integration of rainbow
rainbow:
  enabled: true
  db:
    url: postgresql
    user: postgres
    existingSecret: database-secret
    passwordKey: postgres-admin-password
  ingress:
    enabled: true
    hosts:
      - host: rainbow-provider.127.0.0.1.nip.io
        paths:
          - /
tpp:
  enabled: true
  transfers:
    host: http://rainbow-provider.127.0.0.1.nip.io:8080
    path: transfers
contract-management:
  did: did:web:mp-operations.org
  enableCentralMarketplace: true
  services:
    ## Config for Trusted Issuers List
    trusted-issuers-list:
      ## URL of the Trusted Issuers List Service
      url: http://trusted-issuers-list:8080
    ## Config for the TM Forum Service hosting the APIs
    product-order:
      ## URL of the TM Forum Service hosting the Product Ordering API
      url: http://provider-tm-forum-api-product-ordering-management:8080
    party:
      ## URL of the TM Forum Service hosting the Party API
      url: http://provider-tm-forum-api-party-catalog:8080
    product-catalog:
      ## URL of the TM Forum Service hosting the Product Catalog API
      url: http://provider-tm-forum-api-product-catalog:8080
    service-catalog:
      ## URL of the TM Forum Service hosting the Service Catalog API
      url: http://provider-tm-forum-api-service-catalog:8080
    tmforum-agreement-api:
      ## URL of the TM Forum Service hosting the Agreement API
      url: http://provider-tm-forum-api-agreement:8080
    quote:
      ## URL for TM Forum Service hosting the Quote API
      url: http://provider-tm-forum-api-quote:8080
    rainbow:
      ## URL for the Rainbow service
      url: http://rainbow:8080
    odrl:
      ## URL for the ODRL-PAP
      url: http://odrl-pap:8080
  notification:
    enabled: true
    host: contract-management
  additionalEnvVars:
    - name: LOGGER_LEVELS_ROOT
      value: DEBUG
trusted-issuers-list:
  # only open for clean up in the tests
  ingress:
    til:
      enabled: true
      hosts:
        - host: til-provider.127.0.0.1.nip.io
          paths:
            - /
mongo-operator:
  enabled: false
managedMongo:
  enabled: true
  spec:
    statefulSet:
      spec:
        template:
          spec:
            #  Hostpath volumes are owned by root
            #  but MongoDB containers run as non root
            #  so we use an init container to change the owner of
            #  the directory (init containers run as root)
            initContainers:
              - command:
                  - chown
                  - -R
                  - "2000"
                  - /data
                image: busybox
                volumeMounts:
                  - mountPath: /data
                    name: data-volume
                securityContext:
                  runAsNonRoot: false
                  runAsUser: 0
                  runAsGroup: 0
                name: change-dir-permissions
        volumeClaimTemplates:
          - metadata:
              name: data-volume
            spec:
              accessModes:
                - ReadWriteOnce
              storageClassName: default
              resources:
                requests:
                  storage: "1Gi"
          - metadata:
              name: logs-volume
            spec:
              accessModes:
                - ReadWriteOnce
              storageClassName: default
              resources:
                requests:
                  storage: "1Gi"
marketplace:
  enabled: true
  siop:
    verifier:
      host: https://verifier.mp-operations.org
    allowedRoles:
      - seller
      - customer
      - admin
      - REPRESENTATIVE
      - READER
      - OPERATOR
  externalUrl: https://marketplace.127.0.0.1.nip.io
  bizEcosystemChargingBackend:
    deployment:
      image:
        tag: 10.5.0
    extraEnvVars:
      - name: BAE_CB_CUSTOMER_BILL
        value: "http://provider-tm-forum-api-customer-bill-management:8080/tmf-api/customerBillManagement/v4"
  bizEcosystemApis:
    tmForum:
      catalog:
        host: provider-tm-forum-api-product-catalog
        port: 8080
        path: /tmf-api/productCatalogManagement/v4
      inventory:
        host: provider-tm-forum-api-product-inventory
        port: 8080
        path: /tmf-api/productInventory/v4
      ordering:
        host: provider-tm-forum-api-product-ordering-management
        port: 8080
        path: /tmf-api/productOrderingManagement/v4
      billing:
        host: provider-tm-forum-api-account
        port: 8080
        path: /tmf-api/accountManagement/v4
      usage:
        host: provider-tm-forum-api-usage-management
        port: 8080
        path: /tmf-api/usageManagement/v4
      party:
        host: provider-tm-forum-api-party-catalog
        port: 8080
        path: /tmf-api/party/v4
      customer:
        host: provider-tm-forum-api-customer-management
        port: 8080
        path: /tmf-api/customerManagement/v4
      resources:
        host: provider-tm-forum-api-resource-catalog
        port: 8080
        path: /tmf-api/resourceCatalog/v4
      services:
        host: provider-tm-forum-api-service-catalog
        port: 8080
        path: /tmf-api/serviceCatalogManagement/v4
      resourceInventory:
        host: provider-tm-forum-api-resource-inventory
        port: 8080
        path: /tmf-api/resourceInventoryManagement/v4
  bizEcosystemLogicProxy:
    statefulset:
      image:
        tag: 10.5.0-PRE-1
    ingress:
      enabled: true
      annotations:
        traefik.ingress.kubernetes.io/router.tls: "true"
      hosts:
        - host: marketplace.127.0.0.1.nip.io
          paths:
            - "/"
    additionalEnvVars:
      - name: BAE_LP_SIOP_IS_REDIRECTION
        value: "true"
      - name: BAE_LP_PURCHASE_ENABLED
        value: "true"
      - name: NODE_TLS_REJECT_UNAUTHORIZED
        value: "0"
      - name: HTTPS_PROXY
        value: "http://squid-proxy.infra.svc.cluster.local:8888"
      - name: BAE_LP_SIOP_CLIENT_ID
        value: did:web:mp-operations.org
      - name: BAE_LP_SIOP_PRIVATE_KEY
        valueFrom:
          secretKeyRef:
            name: signing-key-env
            key: key
keycloak:
  ingress:
    enabled: true
    hostname: keycloak-provider.127.0.0.1.nip.io
    annotations:
      traefik.ingress.kubernetes.io/router.tls: "true"
  extraVolumeMounts:
    - name: realms
      mountPath: /opt/bitnami/keycloak/data/import
    - name: provider-key
      mountPath: "/keys"
  extraVolumes:
    - name: realms
      configMap:
        name: test-realm-realm
    - name: provider-key
      secret:
        secretName: provider-keystore
        defaultMode: 0755
  signingKey:
    storePath: /keys/cert.jks
    storePassword: "${STORE_PASS}"
    keyAlias: certificate
    keyPassword: "${STORE_PASS}"
    did: did:web:mp-operations.org
    keyAlgorithm: ES256
  extraEnvVars:
    - name: "STORE_PASS"
      valueFrom:
        secretKeyRef:
          name: provider-keystore
          key: password
  realm:
    frontendUrl: https://keycloak-provider.127.0.0.1.nip.io
    import: true
    name: test-realm
    attributes: |
      "vc.user-sd.credential_signing_alg_values_supported": "ES256",
      "vc.user-sd.credential_build_config.signing_algorithm": "ES256",
      "vc.user-sd.credential_build_config.token_jws_type": "vc+sd-jwt",
      "vc.user-sd.credential_build_config.proof_types_supported": "{\"jwt\":{\"proof_signing_alg_values_supported\":[\"ES256\"]}}",
      "vc.user-sd.format": "vc+sd-jwt",
      "vc.user-sd.scope": "LegalPersonCredential",
      "vc.user-sd.vct": "LegalPersonCredential",
      "vc.user-sd.credential_build_config.visible_claims": "roles,email",
      "vc.user-sd.credential_build_config.decoys": "3",
      "vc.user-credential.credential_signing_alg_values_supported": "ES256",
      "vc.user-credential.credential_build_config.signing_algorithm": "ES256",
      "vc.user-credential.credential_build_config.token_jws_type": "JWT",
      "vc.user-credential.credential_build_config.proof_types_supported": "{\"jwt\":{\"proof_signing_alg_values_supported\":[\"ES256\"]}}",
      "vc.user-credential.format": "jwt_vc",
      "vc.user-credential.scope": "LegalPersonCredential",
      "vc.user-credential.vct": "LegalPersonCredential",
      "vc.verifiable-credential.format": "vc+sd-jwt",
      "vc.verifiable-credential.scope": "VerifiableCredential",
      "vc.verifiable-credential.vct": "VerifiableCredential",
      "vc.operator-credential.format": "vc+sd-jwt",
      "vc.operator-credential.scope": "OperatorCredential",
      "vc.operator-credential.vct": "OperatorCredential"
    clientRoles: |
      "did:web:fancy-marketplace.biz": [
        {
          "name": "customer",
          "description": "Is allowed to see offers etc.",
          "clientRole": true
        },
        {
          "name": "OPERATOR",
          "description": "Is allowed to operate clusters.",
          "clientRole": true
        },
        {
          "name": "REPRESENTATIVE",
          "description": "Is allowed to register.",
          "clientRole": true
        }],
      "account": [
        {
          "name": "delete-account",
          "description": "${role_delete-account}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "view-consent",
          "description": "${role_view-consent}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "view-groups",
          "description": "${role_view-groups}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "manage-account",
          "description": "${role_manage-account}",
          "composite": true,
          "composites": {
            "client": {
              "account": [
                "manage-account-links"
              ]
            }
          },
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "view-profile",
          "description": "${role_view-profile}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "view-applications",
          "description": "${role_view-applications}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "manage-consent",
          "description": "${role_manage-consent}",
          "composite": true,
          "composites": {
            "client": {
              "account": [
                "view-consent"
              ]
            }
          },
          "clientRole": true,
          "attributes": {}
        },
        {
          "name": "manage-account-links",
          "description": "${role_manage-account-links}",
          "composite": false,
          "clientRole": true,
          "attributes": {}
        }
      ]
    users: |
      {
        "username": "employee",
        "enabled": true,
        "email": "employee@provider.org",
        "firstName": "Test",
        "lastName": "User",
        "credentials": [
          {
            "type": "password",
            "value": "test"
          }
        ],
        "clientRoles": {
          "did:web:fancy-marketplace.biz": [
            "seller",
            "admin",
            "REPRESENTATIVE"
          ],
          "account": [
            "view-profile",
            "manage-account"
          ]
        },
        "groups": [
            "/consumer"
        ]
      }
    clientScopes: |
      {
        "name": "LegalPersonCredential",
        "description": "OIDC4VC Scope, thahttps://github.com/wistefan/did-helpert adds all properties required for a user.",
        "protocol": "openid-connect",
        "attributes": {},
        "protocolMappers": [
          {
            "name": "context-mapper",
            "protocol": "oid4vc",
            "protocolMapper": "oid4vc-context-mapper",
            "config": {
              "context": "https://www.w3.org/2018/credentials/v1",
              "supportedCredentialTypes": "VerifiableCredential,LegalPersonCredential,OperatorCredential"
            }
          },
          {
            "name": "email-mapper",
            "protocol": "oid4vc",
            "protocolMapper": "oid4vc-user-attribute-mapper",
            "config": {
              "subjectProperty": "email",
              "userAttribute": "email",
              "supportedCredentialTypes": "LegalPersonCredential,OperatorCredential"
            }
          },
          {
            "name": "firstName-mapper",
            "protocol": "oid4vc",
            "protocolMapper": "oid4vc-user-attribute-mapper",
            "config": {
              "subjectProperty": "firstName",
              "userAttribute": "firstName",
              "supportedCredentialTypes": "LegalPersonCredential,OperatorCredential"
            }
          },
          {
            "name": "lastName-mapper",
            "protocol": "oid4vc",
            "protocolMapper": "oid4vc-user-attribute-mapper",
            "config": {
              "subjectProperty": "lastName",
              "userAttribute": "lastName",
              "supportedCredentialTypes": "LegalPersonCredential,OperatorCredential"
            }
          },
          {
            "name": "role-mapper",
            "protocol": "oid4vc",
            "protocolMapper": "oid4vc-target-role-mapper",
            "config": {
              "subjectProperty": "roles",
              "clientId": "did:web:fancy-marketplace.biz",
              "supportedCredentialTypes": "LegalPersonCredential,OperatorCredential"
            }
          }
        ]
      }
    clients: "{\n  \"clientId\": \"did:web:fancy-marketplace.biz\",\n  \"enabled\": true,\n  \"description\": \"Client to connect test.org\",\n  \"surrogateAuthRequired\": false,\n  \"alwaysDisplayInConsole\": false,\n  \"clientAuthenticatorType\": \"client-secret\",\n  \"defaultRoles\": [],\n  \"redirectUris\": [],   \n  \"webOrigins\": [],\n  \"notBefore\": 0,\n  \"bearerOnly\": false,\n  \"consentRequired\": false,\n  \"standardFlowEnabled\": true,\n  \"implicitFlowEnabled\": false,\n  \"directAccessGrantsEnabled\": false,\n  \"serviceAccountsEnabled\": false,\n  \"publicClient\": false,\n  \"frontchannelLogout\": false,\n  \"protocol\": \"openid-connect\",\n  \"attributes\": {\n    \"client.secret.creation.time\": \"1675260539\"\n  },\n  \"protocolMappers\": [\n  ],\n  \"authenticationFlowBindingOverrides\": {},\n  \"fullScopeAllowed\": true,\n  \"nodeReRegistrationTimeout\": -1,\n  \"defaultClientScopes\": [],\n  \"optionalClientScopes\": []\n},\n{\n  \"clientId\": \"account\",\n  \"name\": \"${client_account}\",\n  \"rootUrl\": \"${authBaseUrl}\",\n  \"baseUrl\": \"/realms/test-realm/account/\",\n  \"surrogateAuthRequired\": false,\n  \"enabled\": true,\n  \"alwaysDisplayInConsole\": false,\n  \"clientAuthenticatorType\": \"client-secret\",\n  \"redirectUris\": [\n    \"/realms/test-realm/account/*\"\n  ],\n  \"webOrigins\": [],\n  \"notBefore\": 0,\n  \"bearerOnly\": false,\n  \"consentRequired\": false,\n  \"standardFlowEnabled\": true,\n  \"implicitFlowEnabled\": false,\n  \"directAccessGrantsEnabled\": false,\n  \"serviceAccountsEnabled\": false,\n  \"publicClient\": true,\n  \"frontchannelLogout\": false,\n  \"protocol\": \"openid-connect\",\n  \"attributes\": {\n    \"realm_client\": \"false\",\n    \"post.logout.redirect.uris\": \"+\"\n  },\n  \"authenticationFlowBindingOverrides\": {},\n  \"fullScopeAllowed\": true,\n  \"nodeReRegistrationTimeout\": 0,\n  \"defaultClientScopes\": [\n    \"web-origins\",\n    \"acr\",\n    \"roles\",\n    \"profile\",\n    \"basic\",\n    \"email\"\n  ],\n  \"optionalClientScopes\": [\n    \"address\",\n    \"phone\",\n    \"offline_access\",\n    \"organization\",\n    \"microprofile-jwt\"\n  ]\n},\n{\n  \"clientId\": \"account-console\",\n  \"name\": \"${client_account-console}\",\n  \"rootUrl\": \"${authBaseUrl}\",\n  \"baseUrl\": \"/realms/test-realm/account/\",\n  \"surrogateAuthRequired\": false,\n  \"enabled\": true,\n  \"alwaysDisplayInConsole\": false,\n  \"clientAuthenticatorType\": \"client-secret\",\n  \"redirectUris\": [\n    \"/realms/test-realm/account/*\"\n  ],\n  \"webOrigins\": [],\n  \"notBefore\": 0,\n  \"bearerOnly\": false,\n  \"consentRequired\": false,\n  \"standardFlowEnabled\": true,\n  \"implicitFlowEnabled\": false,\n  \"directAccessGrantsEnabled\": true,\n  \"serviceAccountsEnabled\": false,\n  \"publicClient\": true,\n  \"frontchannelLogout\": false,\n  \"protocol\": \"openid-connect\",\n  \"attributes\": {\n    \"realm_client\": \"false\",\n    \"post.logout.redirect.uris\": \"+\",\n    \"pkce.code.challenge.method\": \"S256\"\n  },\n  \"authenticationFlowBindingOverrides\": {},\n  \"fullScopeAllowed\": true,\n  \"nodeReRegistrationTimeout\": 0,\n  \"protocolMappers\": [\n    {\n      \"id\": \"706c5202-1b03-4fad-a5b8-484287e941f8\",\n      \"name\": \"audience resolve\",\n      \"protocol\": \"openid-connect\",\n      \"protocolMapper\": \"oidc-audience-resolve-mapper\",\n      \"consentRequired\": false,\n      \"config\": {}\n    }\n  ],\n  \"defaultClientScopes\": [\n    \"web-origins\",\n    \"acr\",\n    \"roles\",\n    \"profile\",\n    \"basic\",\n    \"email\"\n  ],\n  \"optionalClientScopes\": [\n    \"address\",\n    \"phone\",\n    \"offline_access\",\n    \"organization\",\n    \"microprofile-jwt\",\n    \"LegalPersonCredential\"\n  ]\n},\n{\n  \"clientId\": \"admin-cli\",\n  \"name\": \"${client_admin-cli}\",\n  \"surrogateAuthRequired\": false,\n  \"enabled\": true,\n  \"alwaysDisplayInConsole\": false,\n  \"clientAuthenticatorType\": \"client-secret\",\n  \"redirectUris\": [],\n  \"webOrigins\": [],\n  \"notBefore\": 0,\n  \"bearerOnly\": false,\n  \"consentRequired\": false,\n  \"standardFlowEnabled\": false,\n  \"implicitFlowEnabled\": false,\n  \"directAccessGrantsEnabled\": true,\n  \"serviceAccountsEnabled\": false,\n  \"publicClient\": true,\n  \"frontchannelLogout\": false,\n  \"protocol\": \"openid-connect\",\n  \"attributes\": {\n    \"realm_client\": \"false\",\n    \"client.use.lightweight.access.token.enabled\": \"true\"\n  },\n  \"authenticationFlowBindingOverrides\": {},\n  \"fullScopeAllowed\": true,\n  \"nodeReRegistrationTimeout\": 0,\n  \"protocolMappers\": [\n    {\n      \"name\": \"audience resolve\",\n      \"protocol\": \"openid-connect\",\n      \"protocolMapper\": \"oidc-audience-resolve-mapper\",\n      \"consentRequired\": false,\n      \"config\": {}\n    }\n  ],\n  \"defaultClientScopes\": [\n    \"web-origins\",\n    \"acr\",\n    \"roles\",\n    \"profile\",\n    \"basic\",\n    \"email\"\n  ],\n  \"optionalClientScopes\": [\n    \"address\",\n    \"phone\",\n    \"offline_access\",\n    \"organization\",\n    \"microprofile-jwt\",\n    \"UserCredential\"\n  ]\n}\n"
registration:
  enabled: true
  configMap: provider-til-registration
  til: http://trusted-issuers-list.provider.svc.cluster.local:8080
  did: did:web:mp-operations.org
  credentialTypes:
    - LegalPersonCredential
  prepScript: export $(curl -f -X GET did-helper:3002/did-material/did.env)
